import 'dart:convert';

import 'package:avanpost_retraining/pages/ai_test/prediction_model.dart';
import 'package:avanpost_retraining/requests/constants.dart';
import 'package:http/http.dart' as http;

class RecognitionRequests {
  static Future<List<PredictionModel>> recognise(List<String> images) async {
    // final body = {"data": images.join(",")};

    final response =
        await http.post(Uri.http(host, '/api/start_neuron/'), headers: {"Content-Type": "application/json"});

    print(response.body);

    final jsonRez = json.decode(response.body);

    print(jsonRez);

    // as Map<String, List<String>>;

    List<PredictionModel> preds = [];

    // a.forEach((key, value) {
    //   preds.add(PredictionModel(imageUrl: key, predictedClasses: (value is String) ? [] : value));
    // });

    jsonRez.forEach((key, value) {
      print(value);

      preds.add(PredictionModel(
          imageUrl: key,
          predictedClasses: (value is String) ? [] : (value as List<dynamic>).map((e) => e.toString()).toList()));
    });

    return preds;
  }
}

// final Map<String, dynamic> a = {};

// {
//   "http://127.0.0.1:8000//media/images/tests/56.jpg": ["ski"],
//   "http://127.0.0.1:8000//media/images/tests/158.jpg": ["horse"],
//   "http://127.0.0.1:8000//media/images/tests/42.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/31.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/113.jpg": ["dump truck"],
//   "http://127.0.0.1:8000//media/images/tests/225.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/179.jpg": ["lawnmower"],
//   "http://127.0.0.1:8000//media/images/tests/55.jpg": ["horse"],
//   "http://127.0.0.1:8000//media/images/tests/100.jpg": ["horse"],
//   "http://127.0.0.1:8000//media/images/tests/54.jpg": ["snowmobile"],
//   "http://127.0.0.1:8000//media/images/tests/37.jpg": ["lawnmower"],
//   "http://127.0.0.1:8000//media/images/tests/25.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/124.jpg": ["van"],
//   "http://127.0.0.1:8000//media/images/tests/19.jpg": ["train"],
//   "http://127.0.0.1:8000//media/images/tests/118.jpg": ["lawnmower"],
//   "http://127.0.0.1:8000//media/images/tests/127.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/229.jpg": ["ski"],
//   "http://127.0.0.1:8000//media/images/tests/75.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/165.jpg": ["horse"],
//   "http://127.0.0.1:8000//media/images/tests/183.jpg": ["van"],
//   "http://127.0.0.1:8000//media/images/tests/202.jpg": ["ski"],
//   "http://127.0.0.1:8000//media/images/tests/214.jpg": ["van"],
//   "http://127.0.0.1:8000//media/images/tests/160.jpg": ["train"],
//   "http://127.0.0.1:8000//media/images/tests/224.jpg": ["snowboard"],
//   "http://127.0.0.1:8000//media/images/tests/162.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/38.jpg": ["van"],
//   "http://127.0.0.1:8000//media/images/tests/5.jpg": ["snowmobile"],
//   "http://127.0.0.1:8000//media/images/tests/228.jpg": ["skateboard"],
//   "http://127.0.0.1:8000//media/images/tests/15.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/172.jpg": ["lawnmower"],
//   "http://127.0.0.1:8000//media/images/tests/58.jpg": ["dump truck"],
//   "http://127.0.0.1:8000//media/images/tests/114.jpg": ["horse"],
//   "http://127.0.0.1:8000//media/images/tests/83.jpg": ["train"],
//   "http://127.0.0.1:8000//media/images/tests/61.jpg": ["ski"],
//   "http://127.0.0.1:8000//media/images/tests/207.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/191.jpg": ["van"],
//   "http://127.0.0.1:8000//media/images/tests/80.jpg": ["dump truck"],
//   "http://127.0.0.1:8000//media/images/tests/220.jpg": ["truck"],
//   "http://127.0.0.1:8000//media/images/tests/69.jpg": ["lawnmower"],
//   "http://127.0.0.1:8000//media/images/tests/57.jpg": ["van"],
//   "http://127.0.0.1:8000//media/images/tests/232.jpg": ["truck"],
//   "http://127.0.0.1:8000//media/images/tests/85.jpg": ["snowboard"],
//   "http://127.0.0.1:8000//media/images/tests/196.jpg": ["horse"],
//   "http://127.0.0.1:8000//media/images/tests/159.jpg": ["train"],
//   "http://127.0.0.1:8000//media/images/tests/231.jpg": ["truck"],
//   "http://127.0.0.1:8000//media/images/tests/198.jpg": ["skateboard"],
//   "http://127.0.0.1:8000//media/images/tests/142.jpg": ["horse"],
//   "http://127.0.0.1:8000//media/images/tests/173.jpg": ["skateboard"],
//   "http://127.0.0.1:8000//media/images/tests/22.jpg": ["ski"],
//   "http://127.0.0.1:8000//media/images/tests/184.jpg": ["horse"],
//   "http://127.0.0.1:8000//media/images/tests/205.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/176.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/4.jpg": ["van"],
//   "http://127.0.0.1:8000//media/images/tests/111.jpg": ["van"],
//   "http://127.0.0.1:8000//media/images/tests/45.jpg": ["lawnmower"],
//   "http://127.0.0.1:8000//media/images/tests/204.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/148.jpg": ["truck"],
//   "http://127.0.0.1:8000//media/images/tests/поезд.jpg": ["train"],
//   "http://127.0.0.1:8000//media/images/tests/120.jpg": ["van"],
//   "http://127.0.0.1:8000//media/images/tests/лыжи.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/126.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/50.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/197.jpg": ["dump truck"],
//   "http://127.0.0.1:8000//media/images/tests/88.jpg": ["train"],
//   "http://127.0.0.1:8000//media/images/tests/66.jpg": ["truck"],
//   "http://127.0.0.1:8000//media/images/tests/76.jpg": ["skateboard"],
//   "http://127.0.0.1:8000//media/images/tests/192.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/213.jpg": ["skateboard"],
//   "http://127.0.0.1:8000//media/images/tests/190.jpg": ["snowboard"],
//   "http://127.0.0.1:8000//media/images/tests/79.jpg": ["dump truck"],
//   "http://127.0.0.1:8000//media/images/tests/грузовик.jpg": ["truck"],
//   "http://127.0.0.1:8000//media/images/tests/230.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/221.jpg": ["van"],
//   "http://127.0.0.1:8000//media/images/tests/200.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/153.jpg": ["snowboard"],
//   "http://127.0.0.1:8000//media/images/tests/144.jpg": ["lawnmower"],
//   "http://127.0.0.1:8000//media/images/tests/166.jpg": ["snowboard"],
//   "http://127.0.0.1:8000//media/images/tests/217.jpg": ["van"],
//   "http://127.0.0.1:8000//media/images/tests/10.jpg": ["ski"],
//   "http://127.0.0.1:8000//media/images/tests/194.jpg": ["truck"],
//   "http://127.0.0.1:8000//media/images/tests/лошадь.jpg": ["horse"],
//   "http://127.0.0.1:8000//media/images/tests/154.jpg": ["truck"],
//   "http://127.0.0.1:8000//media/images/tests/95.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/139.jpg": ["skateboard"],
//   "http://127.0.0.1:8000//media/images/tests/157.jpg": ["van"],
//   "http://127.0.0.1:8000//media/images/tests/226.jpg": ["lawnmower"],
//   "http://127.0.0.1:8000//media/images/tests/103.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/49.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/93.jpg": ["lawnmower"],
//   "http://127.0.0.1:8000//media/images/tests/208.jpg": ["ski"],
//   "http://127.0.0.1:8000//media/images/tests/21.jpg": ["truck"],
//   "http://127.0.0.1:8000//media/images/tests/138.jpg": ["snowmobile"],
//   "http://127.0.0.1:8000//media/images/tests/211.jpg": ["ski"],
//   "http://127.0.0.1:8000//media/images/tests/180.jpg": ["skateboard"],
//   "http://127.0.0.1:8000//media/images/tests/33.jpg": ["snowmobile"],
//   "http://127.0.0.1:8000//media/images/tests/189.jpg": ["horse"],
//   "http://127.0.0.1:8000//media/images/tests/92.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/174.jpg": ["horse"],
//   "http://127.0.0.1:8000//media/images/tests/206.jpg": ["snowmobile"],
//   "http://127.0.0.1:8000//media/images/tests/43.jpg": ["car"],
//   "http://127.0.0.1:8000//media/images/tests/34.jpg": ["horse"],
//   "http://127.0.0.1:8000//media/images/tests/131.jpg": ["horse"],
//   "http://127.0.0.1:8000//media/images/tests/16.jpg": ["van"],
//   "http://127.0.0.1:8000//media/images/tests/73.jpg": ["train"],
//   "http://127.0.0.1:8000//media/images/tests/86.jpg": ["dump truck"],
//   "http://127.0.0.1:8000//media/images/tests/149.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/23.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/170.jpg": ["dump truck"],
//   "http://127.0.0.1:8000//media/images/tests/106.jpg": ["snowmobile"],
//   "http://127.0.0.1:8000//media/images/tests/185.jpg": ["lawnmower"],
//   "http://127.0.0.1:8000//media/images/tests/163.jpg": ["lawnmower"],
//   "http://127.0.0.1:8000//media/images/tests/24.jpg": ["ski"],
//   "http://127.0.0.1:8000//media/images/tests/132.jpg": ["horse"],
//   "http://127.0.0.1:8000//media/images/tests/52.jpg": ["lawnmower"],
//   "http://127.0.0.1:8000//media/images/tests/9.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/169.jpg": ["dump truck"],
//   "http://127.0.0.1:8000//media/images/tests/82.jpg": ["skateboard"],
//   "http://127.0.0.1:8000//media/images/tests/161.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/203.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/145.jpg": ["skateboard"],
//   "http://127.0.0.1:8000//media/images/tests/140.jpg": ["truck"],
//   "http://127.0.0.1:8000//media/images/tests/13.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/84.jpg": ["snowmobile"],
//   "http://127.0.0.1:8000//media/images/tests/3.jpg": ["skateboard"],
//   "http://127.0.0.1:8000//media/images/tests/151.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/29.jpg": ["snowmobile"],
//   "http://127.0.0.1:8000//media/images/tests/215.jpg": ["car"],
//   "http://127.0.0.1:8000//media/images/tests/219.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/1.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/26.jpg": ["lawnmower"],
//   "http://127.0.0.1:8000//media/images/tests/212.jpg": ["truck"],
//   "http://127.0.0.1:8000//media/images/tests/201.jpg": ["train"],
//   "http://127.0.0.1:8000//media/images/tests/101.jpg": ["dump truck"],
//   "http://127.0.0.1:8000//media/images/tests/47.jpg": ["train"],
//   "http://127.0.0.1:8000//media/images/tests/216.jpg": ["skateboard"],
//   "http://127.0.0.1:8000//media/images/tests/72.jpg": ["truck"],
//   "http://127.0.0.1:8000//media/images/tests/193.jpg": ["skateboard"],
//   "http://127.0.0.1:8000//media/images/tests/44.jpg": ["dump truck"],
//   "http://127.0.0.1:8000//media/images/tests/147.jpg": ["skateboard"],
//   "http://127.0.0.1:8000//media/images/tests/195.jpg": ["truck"],
//   "http://127.0.0.1:8000//media/images/tests/123.jpg": ["truck"],
//   "http://127.0.0.1:8000//media/images/tests/39.jpg": ["skateboard"],
//   "http://127.0.0.1:8000//media/images/tests/60.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/53.jpg": ["lawnmower"],
//   "http://127.0.0.1:8000//media/images/tests/210.jpg": ["skateboard"],
//   "http://127.0.0.1:8000//media/images/tests/130.jpg": ["truck"],
//   "http://127.0.0.1:8000//media/images/tests/227.jpg": ["skateboard"],
//   "http://127.0.0.1:8000//media/images/tests/116.jpg": ["train"],
//   "http://127.0.0.1:8000//media/images/tests/136.jpg": ["truck"],
//   "http://127.0.0.1:8000//media/images/tests/98.jpg": ["train"],
//   "http://127.0.0.1:8000//media/images/tests/77.jpg": ["lawnmower"],
//   "http://127.0.0.1:8000//media/images/tests/14.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/156.jpg": ["truck"],
//   "http://127.0.0.1:8000//media/images/tests/62.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/141.jpg": ["train"],
//   "http://127.0.0.1:8000//media/images/tests/71.jpg": ["train"],
//   "http://127.0.0.1:8000//media/images/tests/128.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/96.jpg": ["truck"],
//   "http://127.0.0.1:8000//media/images/tests/108.jpg": ["snowboard"],
//   "http://127.0.0.1:8000//media/images/tests/222.jpg": ["lawnmower"],
//   "http://127.0.0.1:8000//media/images/tests/30.jpg": ["lawnmower"],
//   "http://127.0.0.1:8000//media/images/tests/63.jpg": ["train"],
//   "http://127.0.0.1:8000//media/images/tests/64.jpg": ["dump truck"],
//   "http://127.0.0.1:8000//media/images/tests/125.jpg": ["horse"],
//   "http://127.0.0.1:8000//media/images/tests/65.jpg": ["lawnmower"],
//   "http://127.0.0.1:8000//media/images/tests/119.jpg": ["van"],
//   "http://127.0.0.1:8000//media/images/tests/117.jpg": ["horse"],
//   "http://127.0.0.1:8000//media/images/tests/155.jpg": ["lawnmower"],
//   "http://127.0.0.1:8000//media/images/tests/122.jpg": ["lawnmower"],
//   "http://127.0.0.1:8000//media/images/tests/68.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/133.jpg": ["train"],
//   "http://127.0.0.1:8000//media/images/tests/178.jpg": ["truck"],
//   "http://127.0.0.1:8000//media/images/tests/105.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/134.jpg": ["snowmobile"],
//   "http://127.0.0.1:8000//media/images/tests/188.jpg": ["lawnmower"],
//   "http://127.0.0.1:8000//media/images/tests/28.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/2.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/91.jpg": ["lawnmower"],
//   "http://127.0.0.1:8000//media/images/tests/27.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/74.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/46.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/102.jpg": ["snowboard"],
//   "http://127.0.0.1:8000//media/images/tests/135.jpg": ["van"],
//   "http://127.0.0.1:8000//media/images/tests/78.jpg": ["lawnmower"],
//   "http://127.0.0.1:8000//media/images/tests/171.jpg": ["horse"],
//   "http://127.0.0.1:8000//media/images/tests/89.jpg": ["train"],
//   "http://127.0.0.1:8000//media/images/tests/36.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/18.jpg": ["ski"],
//   "http://127.0.0.1:8000//media/images/tests/17.jpg": ["truck"],
//   "http://127.0.0.1:8000//media/images/tests/186.jpg": ["horse"],
//   "http://127.0.0.1:8000//media/images/tests/59.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/7.jpg": ["horse"],
//   "http://127.0.0.1:8000//media/images/tests/164.jpg": ["lawnmower"],
//   "http://127.0.0.1:8000//media/images/tests/12.jpg": ["snowmobile"],
//   "http://127.0.0.1:8000//media/images/tests/187.jpg": ["van"],
//   "http://127.0.0.1:8000//media/images/tests/129.jpg": ["van"],
//   "http://127.0.0.1:8000//media/images/tests/20.jpg": ["van"],
//   "http://127.0.0.1:8000//media/images/tests/87.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/168.jpg": ["skateboard"],
//   "http://127.0.0.1:8000//media/images/tests/182.jpg": ["van"],
//   "http://127.0.0.1:8000//media/images/tests/107.jpg": ["ski"],
//   "http://127.0.0.1:8000//media/images/tests/110.jpg": ["lawnmower"],
//   "http://127.0.0.1:8000//media/images/tests/150.jpg": ["van"],
//   "http://127.0.0.1:8000//media/images/tests/70.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/40.jpg": ["dump truck"],
//   "http://127.0.0.1:8000//media/images/tests/137.jpg": ["lawnmower"],
//   "http://127.0.0.1:8000//media/images/tests/167.jpg": ["snowmobile"],
//   "http://127.0.0.1:8000//media/images/tests/51.jpg": ["snowmobile"],
//   "http://127.0.0.1:8000//media/images/tests/223.jpg": ["ski"],
//   "http://127.0.0.1:8000//media/images/tests/99.jpg": ["dump truck"],
//   "http://127.0.0.1:8000//media/images/tests/181.jpg": ["horse"],
//   "http://127.0.0.1:8000//media/images/tests/11.jpg": ["horse"],
//   "http://127.0.0.1:8000//media/images/tests/199.jpg": ["skateboard"],
//   "http://127.0.0.1:8000//media/images/tests/81.jpg": ["train"],
//   "http://127.0.0.1:8000//media/images/tests/218.jpg": ["ski"],
//   "http://127.0.0.1:8000//media/images/tests/152.jpg": ["car"],
//   "http://127.0.0.1:8000//media/images/tests/32.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/8.jpg": ["lawnmower"],
//   "http://127.0.0.1:8000//media/images/tests/109.jpg": ["dump truck"],
//   "http://127.0.0.1:8000//media/images/tests/121.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/143.jpg": ["train"],
//   "http://127.0.0.1:8000//media/images/tests/112.jpg": ["train"],
//   "http://127.0.0.1:8000//media/images/tests/35.jpg": ["horse"],
//   "http://127.0.0.1:8000//media/images/tests/97.jpg": ["truck"],
//   "http://127.0.0.1:8000//media/images/tests/175.jpg": ["lawnmower"],
//   "http://127.0.0.1:8000//media/images/tests/94.jpg": ["lawnmower"],
//   "http://127.0.0.1:8000//media/images/tests/115.jpg": ["van"],
//   "http://127.0.0.1:8000//media/images/tests/6.jpg": ["horse"],
//   "http://127.0.0.1:8000//media/images/tests/90.jpg": ["lawnmower"],
//   "http://127.0.0.1:8000//media/images/tests/177.jpg": ["skateboard"],
//   "http://127.0.0.1:8000//media/images/tests/146.jpg": ["van"],
//   "http://127.0.0.1:8000//media/images/tests/48.jpg": ["car"],
//   "http://127.0.0.1:8000//media/images/tests/209.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/104.jpg": ["dump truck"],
//   "http://127.0.0.1:8000//media/images/tests/41.jpg": "None",
//   "http://127.0.0.1:8000//media/images/tests/67.jpg": ["lawnmower"]
// };
